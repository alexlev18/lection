<Window x:Class="MapleElectionSim.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Maple Election Simulator" Height="800" Width="1200"
        Background="{StaticResource BackgroundBrush}">
    <Window.Resources>
        <Style TargetType="TextBlock" x:Key="SectionHeader">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Margin" Value="4" />
        </Style>
    </Window.Resources>
    <DockPanel>
        <StatusBar DockPanel.Dock="Bottom">
            <StatusBarItem Content="{Binding StatusMessage}" />
        </StatusBar>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="220" />
                <RowDefinition Height="140" />
            </Grid.RowDefinitions>
            <Border Grid.Row="0" Background="{StaticResource CardBackgroundBrush}" Padding="8" Margin="0,0,0,4">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Button Content="Start" Command="{Binding StartCommand}" />
                    <Button Content="Pause" Command="{Binding PauseCommand}" />
                    <Button Content="Step" Command="{Binding StepCommand}" />
                    <Button Content="Save" Command="{Binding SaveCommand}" />
                    <Button Content="Load" Command="{Binding LoadCommand}" />
                    <Button Content="Settings" Command="{Binding OpenSettingsCommand}" />
                    <StackPanel Orientation="Horizontal" Margin="16,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="Zoom" VerticalAlignment="Center" Margin="0,0,8,0" />
                        <Slider x:Name="ZoomSlider" Minimum="0.5" Maximum="2.5" Value="1" Width="120" />
                    </StackPanel>
                </StackPanel>
            </Border>
            <Grid Grid.Row="1" Margin="0,0,0,4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Border Grid.Column="0" Margin="4" Background="White" CornerRadius="4" Padding="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock Text="Canada" Style="{StaticResource SectionHeader}" />
                        <Grid Grid.Row="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Viewbox Stretch="Uniform" Grid.Row="0">
                                <Grid RenderTransformOrigin="0.5,0.5">
                                    <Grid.RenderTransform>
                                        <ScaleTransform ScaleX="{Binding ElementName=ZoomSlider, Path=Value}" ScaleY="{Binding ElementName=ZoomSlider, Path=Value}" />
                                    </Grid.RenderTransform>
                                    <Canvas Width="600" Height="400">
                                        <ListBox x:Name="ProvinceMap" ItemsSource="{Binding Map.Provinces}" SelectedItem="{Binding Map.SelectedProvince, Mode=TwoWay}"
                                                 Background="Transparent" BorderThickness="0" Width="600" Height="400">
                                            <ListBox.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <Canvas />
                                                </ItemsPanelTemplate>
                                            </ListBox.ItemsPanel>
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Polygon Points="{Binding Points, Converter={StaticResource GeoPointConverter}}" Fill="#4488B0" Stroke="DarkSlateGray" StrokeThickness="1" ToolTip="{Binding Name}" />
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                        <ListBox ItemsSource="{Binding Map.Ridings}" SelectedItem="{Binding Map.SelectedRiding, Mode=TwoWay}"
                                                 Background="Transparent" BorderThickness="0" Width="600" Height="400">
                                            <ListBox.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <Canvas />
                                                </ItemsPanelTemplate>
                                            </ListBox.ItemsPanel>
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Polygon Points="{Binding Points, Converter={StaticResource GeoPointConverter}}" Fill="#44FFC107" Stroke="Goldenrod" StrokeThickness="0.7" ToolTip="{Binding Name}" />
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </Canvas>
                                </Grid>
                            </Viewbox>
                            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,0">
                                <TextBlock Text="Selected Province:" FontWeight="Bold" />
                                <TextBlock Text="{Binding Province.SelectedProvince.Name}" Margin="4,0,0,0" />
                                <TextBlock Text="Selected Riding:" FontWeight="Bold" Margin="16,0,0,0" />
                                <TextBlock Text="{Binding Riding.SelectedRiding.Name}" Margin="4,0,0,0" />
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Border>
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="2*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Border Grid.Row="0" Margin="4" Padding="8" Background="{StaticResource CardBackgroundBrush}" CornerRadius="4">
                        <StackPanel>
                            <TextBlock Text="National Dashboard" Style="{StaticResource SectionHeader}" />
                            <TextBlock Text="Seat Projections" FontWeight="Bold" />
                            <ListView ItemsSource="{Binding Dashboard.SeatProjections}">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Party" DisplayMemberBinding="{Binding Key}" Width="120" />
                                        <GridViewColumn Header="Seats" DisplayMemberBinding="{Binding Value}" Width="80" />
                                    </GridView>
                                </ListView.View>
                            </ListView>
                            <TextBlock Text="Popular Vote" FontWeight="Bold" Margin="0,8,0,0" />
                            <ListView ItemsSource="{Binding Dashboard.PopularVote}">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Party" DisplayMemberBinding="{Binding Key}" Width="120" />
                                        <GridViewColumn Header="Share" DisplayMemberBinding="{Binding Value, StringFormat=P1}" Width="80" />
                                    </GridView>
                                </ListView.View>
                            </ListView>
                            <TextBlock Text="Fundraising" FontWeight="Bold" Margin="0,8,0,0" />
                            <TextBlock Text="{Binding Dashboard.TotalFundraising, StringFormat=C0}" />
                        </StackPanel>
                    </Border>
                    <Border Grid.Row="1" Margin="4" Padding="8" Background="{StaticResource CardBackgroundBrush}" CornerRadius="4">
                        <StackPanel>
                            <TextBlock Text="Province Details" Style="{StaticResource SectionHeader}" />
                            <ListView ItemsSource="{Binding Province.RidingSummaries}">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Riding" DisplayMemberBinding="{Binding RidingName}" Width="140" />
                                        <GridViewColumn Header="Leading" DisplayMemberBinding="{Binding LeadingPartyId}" Width="80" />
                                        <GridViewColumn Header="Support" DisplayMemberBinding="{Binding Support, StringFormat=P1}" Width="80" />
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
            <Grid Grid.Row="2" Margin="0,4,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Border Margin="4" Padding="8" Background="{StaticResource CardBackgroundBrush}" CornerRadius="4">
                    <StackPanel>
                        <TextBlock Text="Riding Demographics" Style="{StaticResource SectionHeader}" />
                        <ListView ItemsSource="{Binding Riding.Demographics}">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Group" DisplayMemberBinding="{Binding Key}" Width="150" />
                                    <GridViewColumn Header="Share" DisplayMemberBinding="{Binding Value, StringFormat=P1}" Width="80" />
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </StackPanel>
                </Border>
                <Border Margin="4" Padding="8" Background="{StaticResource CardBackgroundBrush}" CornerRadius="4" Grid.Column="1">
                    <StackPanel>
                        <TextBlock Text="Riding Polling" Style="{StaticResource SectionHeader}" />
                        <ListView ItemsSource="{Binding Riding.PollingTrend}">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Date" DisplayMemberBinding="{Binding Key}" Width="80" />
                                    <GridViewColumn Header="Support" DisplayMemberBinding="{Binding Value, StringFormat=P1}" Width="80" />
                                </GridView>
                            </ListView.View>
                        </ListView>
                        <TextBlock Text="Party Support" FontWeight="Bold" Margin="0,8,0,0" />
                        <ListView ItemsSource="{Binding Riding.PartySupport}">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Party" DisplayMemberBinding="{Binding Key}" Width="80" />
                                    <GridViewColumn Header="Support" DisplayMemberBinding="{Binding Value, StringFormat=P1}" Width="80" />
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </StackPanel>
                </Border>
            </Grid>
            <Border Grid.Row="3" Margin="0,4,0,0" Padding="8" Background="{StaticResource CardBackgroundBrush}" CornerRadius="4">
                <StackPanel>
                    <TextBlock Text="Timeline" Style="{StaticResource SectionHeader}" />
                    <ListBox ItemsSource="{Binding TimelineMessages}" />
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>
